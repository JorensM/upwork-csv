<!DOCTYPE html>
<html>
    <head>
        <link rel='stylesheet' href='./style.css'>
        <meta name='viewport' content='width=device-width, initial-scale=1' >
    </head>
    <body>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-YBPVSP93EV"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-YBPVSP93EV');
        </script>
        <div class='input-container'>
            <label for='csv-upload'>Please upload the Upwork CSV</label>
            <input type='file' id='csv-upload' />
            <span class='warn' id='csv-upload-error'></span>
        </div>

        <div class='hidden payments-information' id='render-if-uploaded'>
            <form id='options'>
                <div>
                    <div class='input-container'>
                        <label for='conversion-rate'>Conversion rate from USD to local currency</label>
                        <input name='conversion-rate' id='conversion-rate' type='number' step='0.01' min='0'/>
                    </div>
                    <div class='input-container'>
                        <label for='local-currency'>Local currency symbol</label>
                        <input name='local-currency' id='local-currency'/>
                    </div>
                    <h2>Tax deductions</h2>
                    <div id='tax-deduction-fields'>

                    </div>
                    <!-- <div class='input-container'>
                        <label for='tax-deduction'>Tax deduction (percent)</label>
                        <div>
                            <input name='tax-deduction' id='tax-deduction' type='number' step='1' min='0' max='100'/>
                            <span>%</span>
                        </div>
                    </div> -->
                </div>
                <button>Update</button>
            </form>
            <div class='tables'>
                <table id='payments-table'>
    
                </table>
        
                <table id='clients-table'>
        
                </table>
            </div>
        </div>
        
        <footer>
            <details class='how-to-use'>
                <summary>How to use</summary>
                First, download a CSV of your transactions by going to <b>Upwork > Reports > Transactions History</b>,
                selecting a time range and clicking the 'Download CSV' button.
                <img src='./images/download-csv-button.PNG' />
                Next, upload the CSV in the upload field at the top of the page, and you will see information about your payments.
                You can set a conversion rate from USD to your local currency, and set the currency symbol. Additionally you can
                set a tax deduction percentage that will calculate the amount to be taxed for each client.
                After making chnages to the options, click the 'Update' button and the table will be updated with the new
                calculations
            </details>
            <details class='privacy-policy'>
                <summary>Privacy Notice</summary>
                No personally identifiable infomation is being collected. All data is stored
                locally in your browser. The only data that is being collected is your page visit,
                with no other information associated with it.
            </details>
        </footer>
        
        
        <script lang="javascript" src="./lib/xlsx.full.min.js"></script>
        <script src='./main.js'></script>
    </body>
</html>